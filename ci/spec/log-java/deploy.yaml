## DEPLOYMENT STAGE - Log JAVA
deploy_staging_log-java:
    stage: Deploy
    allow_failure: true
    script:
        - sudo apt-get update
        - sudo apt-get install -y curl gcc
        - sudo apt-get install -y build-essential
        - curl -sL https://deb.nodesource.com/setup_12.x | sudo -E bash -
        - gpg --list-keys
        - ls -l ~/.gnupg
        - ls -ld ~/.gnupg
        - cd log-java
        # - git checkout -f staging
        - git status
        # - git push https://$GITHUB_USERNAME:$GITHUB_PASSWORD@github.com/Fyipe/log-java.git staging --force
        - export JAVA_HOME=$(readlink -f /usr/bin/javac | sed "s:/bin/javac::")
        - mvn -X -s .m2/settings.xml -Dgpg.passphrase=$GPG_PASSPHRASE clean deploy
        - cd ..
    only:
        refs:
            - master
            - hotfix-master
            - feature-applog
    environment:
        name: staging
