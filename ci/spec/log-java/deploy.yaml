## DEPLOYMENT STAGE - Log JAVA
deploy_staging_log-java:
    stage: Deploy
    allow_failure: true
    script:
        - sudo apt-get update
        - sudo apt-get install -y curl gcc
        - sudo apt-get install -y build-essential
        - curl -sL https://deb.nodesource.com/setup_12.x | sudo -E bash -
        - gpg --list-keys
        # - gpg --delete-secret-key "Tester <bundayy@outlook.com>"
        # - gpg --delete-key "Tester <bundayy@outlook.com>"
        # - gpg --list-keys
        # - gpg --batch --quick-gen-key --passphrase $GPG_PASSPHRASE 'Tester <bundayy@outlook.com>'
        # - gpg --batch --passphrase $GPG_PASSPHRASE --quick-generate-key FYIPE default default 2024-07-16
        # - gpg --keyserver hkp://pool.sks-keyservers.net --send-keys 933E67E97C807DFCBACB699E49861AA02BA2A6FC

        - cd log-java
        # - git checkout -f staging
        - git status
        # - git push https://$GITHUB_USERNAME:$GITHUB_PASSWORD@github.com/Fyipe/log-java.git staging --force
        # - export JAVA_HOME=$(readlink -f /usr/bin/javac | sed "s:/bin/javac::")
        # # - cp -f .m2/settings.xml $HOME/.m2/settings.xml
        - mvn clean deploy
        # - mvn versions:set -DnewVersion=1.0.0
        # - mvn clean deploy -P release
        - cd ..
    only:
        refs:
            - master
            - hotfix-master
            - feature-applog
    environment:
        name: staging
